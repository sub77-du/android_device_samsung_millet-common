From c3fa17c6667d19272b480163ce88dfdb9019d0cc Mon Sep 17 00:00:00 2001
From: Park Ju Hyung <qkrwngud825@gmail.com>
Date: Thu, 7 Jan 2016 21:52:10 +0900
Subject: Do not abort on setexeccon failure

User can be running the system without SELinux.

Signed-off-by: Park Ju Hyung <qkrwngud825@gmail.com>

diff --git a/Utils.cpp b/Utils.cpp
index 655e6c5..9b81e96 100644
--- a/Utils.cpp
+++ b/Utils.cpp
@@ -270,12 +270,10 @@ status_t ForkExecvp(const std::vector<std::string>& args, security_context_t con
 
     if (setexeccon(context)) {
         LOG(ERROR) << "Failed to setexeccon";
-        abort();
     }
     status_t res = android_fork_execvp(argc, argv, NULL, false, true);
     if (setexeccon(nullptr)) {
         LOG(ERROR) << "Failed to setexeccon";
-        abort();
     }
 
     free(argv);
@@ -302,12 +300,10 @@ status_t ForkExecvp(const std::vector<std::string>& args,
 
     if (setexeccon(context)) {
         LOG(ERROR) << "Failed to setexeccon";
-        abort();
     }
     FILE* fp = popen(cmd.c_str(), "r");
     if (setexeccon(nullptr)) {
         LOG(ERROR) << "Failed to setexeccon";
-        abort();
     }
 
     if (!fp) {
